title = "User - Marketplace"
url = "/mauticians/:user/contributions"
layout = "sidebar-left"
is_hidden = 0
child_of = "mey_no_parent"
hide_crumb = 1
remove_crumb_trail = 0
crumb_disabled = 0

[viewBag]
localeUrl[de] = "/user-marketplace"
localeUrl[fr] = "/user-marketplace"
localeUrl[pgl] = "/user-marketplace"

[userProfile]
username = "{{ :user }}"

[editableBlogPost]
==
{% if profile %}
    {% put sidebar %}
    {% partial 'component_userProfile/user-sidebar' user=profile %}
    {% endput %}

    {# --header-- #}
    <div class="row">
        <div class="col-8 page-header d-flex">
            <h1 class="page-title-icon mb-1">{{ 'Contributed Content'|_ }}</h1>
        </div>
        <div class="col-4 text-right mt-5">
            {% if isOwnProfile %}<p><a
                        href="{{ 'mauticians/profile-contributions_addedit'|page({user:user.username, mode:'add'}) }}"
                        class="btn "><span class="btn-icon fe fe-edit p-1"></span> {{ 'Add new'|_ }}</a></p>{% endif %}
        </div>
    </div>

    {# --blog cards-- #}
    {% if profile.contributed_posts|length %}
        <div class="row row-deck">
            {% for post in profile.contributed_posts|reverse %}
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header p-2">
                            <h3 class="card-title">
                                <a href="{{ 'blog/blog-component-single'|page({slug:post.slug}) }}"
                                   target="_blank">{{ post.title }}</a></h3>

                        </div>
                        <div class="card-body p-2">
                            {{ html_limit(post.content_html, 100, '...') }}
                        </div>
                        <div class="card-footer p-2">

                            <small>{{ post.published_at|date("m/d/Y") }}</small>

                            <div class="control-bar pull-right">
                                {% if post.published == 0 %}
                                    <span class="text-danger">{{ 'Under Review'|_ }}</span>
                                    {% if isOwnProfile %}<a
                                        href="{{ 'mauticians/profile-contributions_addedit'|page({user:user.username, mode:'edit', slug:post.slug }) }}">
                                        <span class="btn-icon fe fe-edit p-1"></span> {{ 'Edit'|_ }}</a>{% endif %}



                                {% else %}
                                    <span class="text-success">{{ 'Approved'|_ }}</span>
                                    <a href="{{ 'blog/blog-component-single'|page({slug:post.slug, mode: ''}) }}"
                                       class=""><span class="btn-icon fe fe-book p-1"></span> {{ 'View'|_ }}</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

{% endif %}
